<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Chatbot</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <div class="chatbox">
            <div class="chatbox__support">
                <div class="chatbox__header">
                    <div class="chatbox__image--header">
                        <img src="https://img.icons8.com/color/48/000000/circled-user-female-skin-type-5--v1.png"
                            alt="image">
                    </div>
                    <div class="chatbox__content--header">
                        <h4 class="chatbox__heading--header">Chat support</h4>
                        <p class="chatbox__description--header">Hi. My name is Sam. How can I help you?</p>
                    </div>
                </div>
                <div class="chatbox__messages" id="chatboxMessages">
                    <!-- Messages will be added here dynamically -->
                </div>
                <div class="chatbox__footer">
                    <input type="text" id="userMessageInput" placeholder="Write a message...">
                    <button class="chatbox__send--footer send__button" onclick="sendMessage()">Send</button>
                </div>
            </div>
            <div class="chatbox__button">
                <button><img src="{{ url_for('static', filename='images/chatbox-icon.svg') }}" /></button>
            </div>
        </div>
    </div>

    <script>
        function sendMessage() {
            var messageInput = document.getElementById('userMessageInput');
            var message = messageInput.value;
            messageInput.value = ''; // Clear input field

            // Display user message
            var chatboxMessages = document.getElementById('chatboxMessages');
            var userMessageElement = document.createElement('div');
            userMessageElement.textContent = 'You: ' + message;
            chatboxMessages.appendChild(userMessageElement);

            // Send message to server
            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: message
                })
            })
            .then(response => response.json())
            .then(data => {
                // Display bot response
                var botResponseElement = document.createElement('div');
                botResponseElement.textContent = 'Sam: ' + data.answer;
                chatboxMessages.appendChild(botResponseElement);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</body>

</html>
